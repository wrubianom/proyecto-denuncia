<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml"
                template="./template/basicTemplate.xhtml">

    <ui:define name="content">

        <p:growl id="growl" showDetail="true" sticky="true" life="1000"/>
        <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript" ></script>



        <center><h:outputLabel value="LUGAR DEL DELITO" styleClass="TextoSubTitulo"/></center><br/><br/>
        <fieldset style="background: rgba(0,0,0,0.3);TextoLegend">
            <legend align="left" style="color: #ffffff; font-style: italic;">Formulario #1: Ubicación</legend>
            <h:panelGrid columns="3" cellspacing="5" cellpadding="5">
                <h:outputLabel for="latitud" value="Latitud: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="latitud" label="Latitud" value="#{denunciaDelitoController.lat}" disabled="true" required="true" title="Latitud" maxlength="20" immediate="true" placeholder="Latitud" validatorMessage="Error en Latitud"/>
                <h:outputLabel for="longitud" value="Longitud: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="longitud" label="Longitud" value="#{denunciaDelitoController.lng}" disabled="true" required="true" title="Longitud" maxlength="20" placeholder="Longitud" validatorMessage="Error en Longitud"/>

                <h:outputLabel for="municipio" value="Municipio: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:selectOneMenu id="municipio" value="#{denunciaDelitoController.denunciaDelito.idMunicipio.idParametro}" required="true" requiredMessage="Ingrese en el Municipio">
                    <f:selectItems value="#{denunciaDelitoController.listaMunicipios}" var="varMunicipios" itemLabel="#{varMunicipios.nombreParametro}" itemValue="#{varMunicipios.idParametro}"/>
                </p:selectOneMenu>

                <h:outputLabel for="barrio" value="Barrio: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:selectOneMenu id="barrio" value="#{denunciaDelitoController.denunciaDelito.idBarrio.idParametro}" required="true" requiredMessage="Ingrese en el Municipio">
                    <f:selectItems value="#{denunciaDelitoController.listaBarrios}" var="varBarrio" itemLabel="#{varBarrio.nombreParametro}" itemValue="#{varBarrio.idParametro}"/>
                </p:selectOneMenu>
                <h:outputLabel for="claseSitio" value="Clase de Sitio: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="claseSitio" label="Clase de Sitio" value="#{denunciaDelitoController.denunciaDelito.claseSitio}" required="true" title="Clase de Sitio" maxlength="20" placeholder="Clase de Sitio" validatorMessage="Error en Clase de Sitio"/>
                <h:outputLabel for="zona" value="Zona: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="zona" label="Zona" value="#{denunciaDelitoController.denunciaDelito.zona}" required="true" title="Zona" maxlength="20"  placeholder="Zona" validatorMessage="Error en Zona"/>
                <h:outputLabel for="tipoDireccion1" value="Tipo Dirección 1: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="tipoDireccion1" label="Tipo Dirección 1" value="#{denunciaDelitoController.denunciaDelito.tipoDireccion}" required="true" title="Tipo Dirección 1" maxlength="20" placeholder="Tipo Dirección 1" validatorMessage="Error en Tipo Dirección 1"/>
                <h:outputLabel for="com1" value="Com1: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="com1" label="Com1" value="#{denunciaDelitoController.denunciaDelito.com1}" required="true" title="Com1" maxlength="20" placeholder="Com1" validatorMessage="Error en Com1"/>
                <h:outputLabel for="letra1" value="Letra1: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="letra1" label="Letra1" value="#{denunciaDelitoController.denunciaDelito.letra1}" required="true" title="Letra1" maxlength="20" placeholder="Letra1" validatorMessage="Error en Letra1"/>
                <h:outputLabel for="tipoDireccion2" value="Tipo Dirección 2: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="tipoDireccion2" label="Tipo Dirección 2" value="#{denunciaDelitoController.denunciaDelito.tipoDireccion2}" required="true" title="Tipo Dirección 2" maxlength="20" placeholder="Tipo Dirección 2" validatorMessage="Error en Tipo Dirección 2"/>
                <h:outputLabel for="com2" value="Com2: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="com2" label="Com2" value="#{denunciaDelitoController.denunciaDelito.com2}" required="true" title="Com2" maxlength="20" placeholder="Com2" validatorMessage="Error en Com2"/>
                <h:outputLabel for="letra2" value="Letra2: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="letra2" label="Letra2" value="#{denunciaDelitoController.denunciaDelito.letra2}" required="true" title="Letra2" maxlength="20" placeholder="Letra2" validatorMessage="Error en Letra2"/>
                <h:outputLabel for="puntoCardenal" value="Punto Cardenal: " styleClass="TextoLabaelOne"/><p:spacer width="20"/>
                <p:inputText id="puntoCardenal" label="Punto Cardenal" value="#{denunciaDelitoController.denunciaDelito.puntoCardenal}" required="true" title="Punto Cardenal" maxlength="20" placeholder="Punto Cardenal" validatorMessage="Error en Punto Cardenal"/>
            </h:panelGrid>
        </fieldset><br/>

        <p:gmap id="gmap" center="4.606912, -74.069365" zoom="16" type="ROADMAP" style="width:100%;height:400px;" model="#{denunciaDelitoController.emptyModel}" widgetVar="map" >
            <p:ajax event="pointSelect" listener="#{denunciaDelitoController.onPointSelect}" update=":formularioPrincipal:growl :formularioPrincipal:gmap :formularioPrincipal:latitud :formularioPrincipal:longitud" />
        </p:gmap>

        <script type="text/javascript">
            var currentMarker = null;

            function handlePointClick(event) {
                if (currentMarker === null) {
                    document.getElementById('lat').value = event.latLng.lat();
                    document.getElementById('lng').value = event.latLng.lng();

                    currentMarker = new google.maps.Marker({
                        position: new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
                    });

                    PF('map').addOverlay(currentMarker);

                    PF('dlg').show();
                }
            }

            function markerAddComplete() {
                var title = document.getElementById('title');
                currentMarker.setTitle(title.value);
                title.value = "";

                currentMarker = null;
                PF('dlg').hide();
            }

            function cancel() {
                PF('dlg').hide();
                currentMarker.setMap(null);
                currentMarker = null;

                return false;
            }
        </script>


        <br/>
        <p:commandButton id="button" value="Registrar" action="#{denunciaDelitoController.crarDenunciaDelito()}" label="Registrar" title="Registrar" icon="ui-icon-check" style="font-size: smaller;margin-left: 50%;" update=":formularioPrincipal:growl"/>

    </ui:define>

</ui:composition>
